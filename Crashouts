local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local screenGui = Instance.new("ScreenGui", game.CoreGui)
screenGui.ResetOnSpawn = false

-- إعدادات
local aimbotEnabled = false
local noclipEnabled = false
local espEnabled = false
local lockFovCenter = false -- خيار تثبيت الدائرة
local fovRadius = 100
local speedActive = false

-- [ القائمة الرئيسية ] --
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 380, 0, 300)
mainFrame.Position = UDim2.new(0.5, -190, 0.5, -150)
mainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
mainFrame.Active = true
mainFrame.Draggable = true
Instance.new("UICorner", mainFrame)
Instance.new("UIStroke", mainFrame).Color = Color3.fromRGB(0, 170, 255)

-- الشعار العلوي
local logoLabel = Instance.new("TextLabel", mainFrame)
logoLabel.Size = UDim2.new(1, 0, 0, 30)
logoLabel.Text = "NX2 v1 - PREMIUM"
logoLabel.TextColor3 = Color3.fromRGB(0, 170, 255)
logoLabel.Font = Enum.Font.SourceSansBold
logoLabel.TextSize = 18
logoLabel.BackgroundTransparency = 1

-- التبويبات
local gamePage = Instance.new("Frame", mainFrame)
gamePage.Size = UDim2.new(1, 0, 1, -40)
gamePage.Position = UDim2.new(0, 0, 0, 40)
gamePage.BackgroundTransparency = 1

local charPage = Instance.new("Frame", mainFrame)
charPage.Size = UDim2.new(1, 0, 1, -40)
charPage.Position = UDim2.new(0, 0, 0, 40)
charPage.BackgroundTransparency = 1
charPage.Visible = false

-- أزرار التبديل
local btnGame = Instance.new("TextButton", mainFrame)
btnGame.Size = UDim2.new(0.5, 0, 0, 30)
btnGame.Position = UDim2.new(0, 0, 0, 30)
btnGame.Text = "اللعب"
btnGame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
btnGame.TextColor3 = Color3.new(1,1,1)

local btnChar = Instance.new("TextButton", mainFrame)
btnChar.Size = UDim2.new(0.5, 0, 0, 30)
btnChar.Position = UDim2.new(0.5, 0, 0, 30)
btnChar.Text = "الشخصية"
btnChar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
btnChar.TextColor3 = Color3.new(1,1,1)

btnGame.MouseButton1Click:Connect(function() gamePage.Visible = true; charPage.Visible = false end)
btnChar.MouseButton1Click:Connect(function() gamePage.Visible = false; charPage.Visible = true end)

-- [ محتوى اللعب ] --
local aimBtn = Instance.new("TextButton", gamePage)
aimBtn.Size = UDim2.new(0.9, 0, 0, 30)
aimBtn.Position = UDim2.new(0.05, 0, 0.05, 0)
aimBtn.Text = "Aimbot: OFF"
aimBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)

local lockFovBtn = Instance.new("TextButton", gamePage)
lockFovBtn.Size = UDim2.new(0.9, 0, 0, 30)
lockFovBtn.Position = UDim2.new(0.05, 0, 0.2, 0)
lockFovBtn.Text = "تثبيت الدائرة بالمنتصف: OFF"

local fovInput = Instance.new("TextBox", gamePage)
fovInput.Size = UDim2.new(0.9, 0, 0, 30)
fovInput.Position = UDim2.new(0.05, 0, 0.35, 0)
fovInput.PlaceholderText = "حجم الدائرة"
fovInput.BackgroundColor3 = Color3.fromRGB(0, 100, 0) -- لون أخضر

-- [ محتوى الشخصية ] --
local noclipBtn = Instance.new("TextButton", charPage)
noclipBtn.Size = UDim2.new(0.9, 0, 0, 30)
noclipBtn.Position = UDim2.new(0.05, 0, 0.05, 0)
noclipBtn.Text = "Noclip (اختراق): OFF"

local speedBtn = Instance.new("TextButton", charPage)
speedBtn.Size = UDim2.new(0.9, 0, 0, 30)
speedBtn.Position = UDim2.new(0.05, 0, 0.2, 0)
speedBtn.Text = "Speed: 5 (OFF)"

-- [ زر النار الأسود NX2 ] --
local fireBtn = Instance.new("TextButton", screenGui)
fireBtn.Size = UDim2.new(0, 70, 0, 70)
fireBtn.Position = UDim2.new(0.8, 0, 0.7, 0)
fireBtn.BackgroundColor3 = Color3.new(0,0,0)
fireBtn.Text = "FIRE\nNX2"
fireBtn.TextColor3 = Color3.new(1,1,1)
fireBtn.Font = Enum.Font.SourceSansBold
fireBtn.Visible = false
Instance.new("UICorner", fireBtn).CornerRadius = UDim.new(1, 0)

-- [ برمجة السرعة الثابتة ] --
speedBtn.MouseButton1Click:Connect(function()
    speedActive = not speedActive
    speedBtn.Text = speedActive and "Speed: 5 (ON)" or "Speed: 5 (OFF)"
    speedBtn.BackgroundColor3 = speedActive and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(40, 40, 40)
end)

game:GetService("RunService").Heartbeat:Connect(function()
    if speedActive and player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.WalkSpeed = 50 -- سرعة 5 بمقياس روبلوكس
    end
end)

-- [ الأيم بوت والدائرة ] --
local fovCircle = Drawing.new("Circle")
fovCircle.Thickness = 1
fovCircle.Color = Color3.new(1, 1, 1)
fovCircle.Visible = false

aimBtn.MouseButton1Click:Connect(function()
    aimbotEnabled = not aimbotEnabled
    fovCircle.Visible = aimbotEnabled
    fireBtn.Visible = aimbotEnabled
    aimBtn.Text = aimbotEnabled and "Aimbot: ON" or "Aimbot: OFF"
end)

lockFovBtn.MouseButton1Click:Connect(function()
    lockFovCenter = not lockFovCenter
    lockFovBtn.Text = lockFovCenter and "تثبيت الدائرة: ON" or "تثبيت الدائرة: OFF"
end)

fovInput.FocusLost:Connect(function() fovRadius = tonumber(fovInput.Text) or 100 end)

local targetPlayer = nil
game:GetService("RunService").RenderStepped:Connect(function()
    fovCircle.Radius = fovRadius
    if lockFovCenter then
        fovCircle.Position = workspace.CurrentCamera.ViewportSize / 2
    else
        fovCircle.Position = Vector2.new(mouse.X, mouse.Y + 36)
    end
    
    -- البحث عن هدف
    local minDist = fovRadius
    targetPlayer = nil
    for _, p in pairs(game.Players:GetPlayers()) do
        if p ~= player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
            local pos, vis = workspace.CurrentCamera:WorldToViewportPoint(p.Character.HumanoidRootPart.Position)
            local mag = (Vector2.new(pos.X, pos.Y) - fovCircle.Position).Magnitude
            if mag < minDist and vis then
                minDist = mag
                targetPlayer = p.Character
            end
        end
    end
end)

-- [ ضرب النار بدون صوت ] --
fireBtn.MouseButton1Click:Connect(function()
    if targetPlayer and targetPlayer:FindFirstChild("Humanoid") then
        -- محاكاة ضربة (Damage) بدون صوت إذا كان السكربت يملك صلاحية أو إطلاق وهمي
        print("NX2 Shooting at: " .. targetPlayer.Name)
        -- هنا يمكنك إضافة كود الريموت الخاص باللعبة لإحداث ضرر حقيقي
    end
end)

-- [ الاختراق - يطفي عند الموت ] --
player.CharacterAdded:Connect(function()
    noclipEnabled = false
    noclipBtn.Text = "Noclip (اختراق): OFF"
end)

noclipBtn.MouseButton1Click:Connect(function()
    noclipEnabled = not noclipEnabled
    noclipBtn.Text = noclipEnabled and "Noclip (اختراق): ON" or "Noclip (اختراق): OFF"
end)

game:GetService("RunService").Stepped:Connect(function()
    if noclipEnabled and player.Character then
        for _, v in pairs(player.Character:GetDescendants()) do
            if v:IsA("BasePart") then v.CanCollide = false end
        end
    end
end)