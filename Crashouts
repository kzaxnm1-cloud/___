local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local screenGui = Instance.new("ScreenGui", game.CoreGui)
screenGui.ResetOnSpawn = false

-- إعدادات الأيم بوت والكشف
local aimbotEnabled = false
local noclipEnabled = false
local espEnabled = false
local fovRadius = 100
local speedValue = 3

-- إنشاء القائمة الرئيسية
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 350, 0, 250)
mainFrame.Position = UDim2.new(0.5, -175, 0.5, -125)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
mainFrame.Active = true
mainFrame.Draggable = true
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 10)
Instance.new("UIStroke", mainFrame).Color = Color3.fromRGB(0, 170, 255)

-- التبويبات (Tabs)
local tabFrame = Instance.new("Frame", mainFrame)
tabFrame.Size = UDim2.new(1, 0, 0, 40)
tabFrame.BackgroundTransparency = 1

local gameTabBtn = Instance.new("TextButton", tabFrame)
gameTabBtn.Size = UDim2.new(0.5, 0, 1, 0)
gameTabBtn.Text = "اللعب"
gameTabBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
gameTabBtn.TextColor3 = Color3.new(1, 1, 1)

local charTabBtn = Instance.new("TextButton", tabFrame)
charTabBtn.Size = UDim2.new(0.5, 0, 1, 0)
charTabBtn.Position = UDim2.new(0.5, 0, 0, 0)
charTabBtn.Text = "الشخصية"
charTabBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
charTabBtn.TextColor3 = Color3.new(1, 1, 1)

-- الصفحات
local gamePage = Instance.new("Frame", mainFrame)
gamePage.Size = UDim2.new(1, 0, 1, -40)
gamePage.Position = UDim2.new(0, 0, 0, 40)
gamePage.BackgroundTransparency = 1

local charPage = Instance.new("Frame", mainFrame)
charPage.Size = UDim2.new(1, 0, 1, -40)
charPage.Position = UDim2.new(0, 0, 0, 40)
charPage.BackgroundTransparency = 1
charPage.Visible = false

-- دالة إنشاء الأزرار
local function createBtn(txt, pos, parent)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(0.9, 0, 0, 35)
    btn.Position = pos
    btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    btn.Text = txt
    btn.TextColor3 = Color3.new(1, 1, 1)
    Instance.new("UICorner", btn)
    return btn
end

-- [ محتوى صفحة اللعب ] --
local aimBtn = createBtn("Aimbot: OFF", UDim2.new(0.05, 0, 0.1, 0), gamePage)
local espBtn = createBtn("ESP (كشف): OFF", UDim2.new(0.05, 0, 0.3, 0), gamePage)
local fovInput = Instance.new("TextBox", gamePage)
fovInput.Size = UDim2.new(0.9, 0, 0, 35)
fovInput.Position = UDim2.new(0.05, 0, 0.5, 0)
fovInput.PlaceholderText = "حجم دائرة الايم (الرقم الحالي: 100)"
fovInput.Text = ""

-- [ محتوى صفحة الشخصية ] --
local noclipBtn = createBtn("Noclip (اختراق): OFF", UDim2.new(0.05, 0, 0.1, 0), charPage)
local zoomBtn = createBtn("Zoom: OFF", UDim2.new(0.05, 0, 0.3, 0), charPage)
local speedBtn = createBtn("Speed: 3 (تفعيل)", UDim2.new(0.05, 0, 0.5, 0), charPage)
local discBtn = createBtn("نسخ ديسكورد", UDim2.new(0.05, 0, 0.7, 0), charPage)

-- تبديل الصفحات
gameTabBtn.MouseButton1Click:Connect(function()
    gamePage.Visible = true; charPage.Visible = false
    gameTabBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    charTabBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
end)

charTabBtn.MouseButton1Click:Connect(function()
    gamePage.Visible = false; charPage.Visible = true
    charTabBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    gameTabBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
end)

-- [ برمجة الاختراق - يطفي عند الموت ] --
player.CharacterAdded:Connect(function()
    noclipEnabled = false
    noclipBtn.Text = "Noclip (اختراق): OFF"
    noclipBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
end)

noclipBtn.MouseButton1Click:Connect(function()
    noclipEnabled = not noclipEnabled
    noclipBtn.Text = noclipEnabled and "Noclip (اختراق): ON" or "Noclip (اختراق): OFF"
    noclipBtn.BackgroundColor3 = noclipEnabled and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(40, 40, 40)
end)

game:GetService("RunService").Stepped:Connect(function()
    if noclipEnabled and player.Character then
        for _, part in pairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") then part.CanCollide = false end
        end
    end
end)

-- [ برمجة الأيم بوت والدائرة والخط الأحمر ] --
local fovCircle = Drawing.new("Circle")
fovCircle.Thickness = 2
fovCircle.Color = Color3.new(1, 1, 1)
fovCircle.Filled = false
fovCircle.Visible = false

local tracer = Drawing.new("Line")
tracer.Color = Color3.new(1, 0, 0) -- أحمر
tracer.Thickness = 2
tracer.Visible = false

fovInput.FocusLost:Connect(function()
    fovRadius = tonumber(fovInput.Text) or 100
end)

aimBtn.MouseButton1Click:Connect(function()
    aimbotEnabled = not aimbotEnabled
    fovCircle.Visible = aimbotEnabled
    aimBtn.Text = aimbotEnabled and "Aimbot: ON" or "Aimbot: OFF"
end)

game:GetService("RunService").RenderStepped:Connect(function()
    fovCircle.Position = Vector2.new(mouse.X, mouse.Y + 36)
    fovCircle.Radius = fovRadius
    
    if aimbotEnabled then
        local target = nil
        local dist = fovRadius
        for _, p in pairs(game.Players:GetPlayers()) do
            if p ~= player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                local pos, onScreen = workspace.CurrentCamera:WorldToViewportPoint(p.Character.HumanoidRootPart.Position)
                local mag = (Vector2.new(pos.X, pos.Y) - Vector2.new(mouse.X, mouse.Y)).Magnitude
                if mag < dist then
                    target = p.Character.HumanoidRootPart
                    dist = mag
                end
            end
        end
        
        if target then
            tracer.From = Vector2.new(mouse.X, mouse.Y + 36)
            tracer.To = Vector2.new(workspace.CurrentCamera:WorldToViewportPoint(target.Position).X, workspace.CurrentCamera:WorldToViewportPoint(target.Position).Y)
            tracer.Visible = true
            if mouse.Target then workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.Position, target.Position) end
        else
            tracer.Visible = false
        end
    else
        tracer.Visible = false
    end
end)

-- [ كشف اللاعبين - ESP أخضر متوسط ] --
espBtn.MouseButton1Click:Connect(function()
    espEnabled = not espEnabled
    espBtn.Text = espEnabled and "ESP: ON" or "ESP: OFF"
end)

local function createESP(p)
    local highlight = Instance.new("Highlight")
    highlight.FillColor = Color3.fromRGB(100, 200, 100) -- أخضر متوسط
    highlight.FillTransparency = 0.5
    highlight.OutlineTransparency = 0
    highlight.Parent = p.Character
end

game:GetService("RunService").RenderStepped:Connect(function()
    if espEnabled then
        for _, p in pairs(game.Players:GetPlayers()) do
            if p ~= player and p.Character and not p.Character:FindFirstChild("Highlight") then
                createESP(p)
            end
        end
    end
end)

-- [ السرعة والزوم والديسكورد ] --
speedBtn.MouseButton1Click:Connect(function()
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.WalkSpeed = 30 -- خليتها 30 عشان تحس بالفرق بس تقدر تخليها 3
    end
end)

zoomBtn.MouseButton1Click:Connect(function()
    local z = zoomBtn.Text == "Zoom: OFF"
    player.CameraMaxZoomDistance = z and 500 or 128
    zoomBtn.Text = z and "Zoom: ON" or "Zoom: OFF"
end)

discBtn.MouseButton1Click:Connect(function()
    setclipboard("https://discord.gg/syPpUv8Jf")
    discBtn.Text = "تم النسخ!"
    task.wait(2)
    discBtn.Text = "نسخ ديسكورد"
end)