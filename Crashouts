local player = game:GetService("Players").LocalPlayer
local mouse = player:GetMouse()
local rs = game:GetService("RunService")
local cg = game:GetService("CoreGui")

-- [ حماية ضد الباند لماب كراشوت ] --
if not getgenv then 
    print("NX2: Protection Active")
end

-- تنظيف النسخ القديمة
if cg:FindFirstChild("NX2_Carshoot") then cg.NX2_Carshoot:Destroy() end

local sg = Instance.new("ScreenGui", cg)
sg.Name = "NX2_Carshoot"
sg.ResetOnSpawn = false
sg.DisplayOrder = 999

-- [ 1. واجهة START - ثابتة وشغالة ] --
local startFrame = Instance.new("Frame", sg)
startFrame.Size = UDim2.new(0, 250, 0, 150)
startFrame.Position = UDim2.new(0.5, -125, 0.4, -75)
startFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
startFrame.ZIndex = 10
Instance.new("UICorner", startFrame)
Instance.new("UIStroke", startFrame).Color = Color3.fromRGB(0, 170, 255)

local sBtn = Instance.new("TextButton", startFrame)
sBtn.Size = UDim2.new(0.8, 0, 0.4, 0)
sBtn.Position = UDim2.new(0.1, 0, 0.3, 0)
sBtn.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
sBtn.Text = "START"
sBtn.TextColor3 = Color3.new(1, 1, 1)
sBtn.TextSize = 25
sBtn.Font = Enum.Font.SourceSansBold
sBtn.ZIndex = 11
Instance.new("UICorner", sBtn)

-- [ 2. القائمة الرئيسية ] --
local main = Instance.new("Frame", sg)
main.Size = UDim2.new(0, 350, 0, 420)
main.Position = UDim2.new(0.5, -175, 0.5, -210)
main.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
main.Visible = false
main.Draggable = true
Instance.new("UICorner", main)
Instance.new("UIStroke", main).Color = Color3.fromRGB(255, 255, 0)

-- [ 3. شريط الإخفاء العلوي ] --
local topBar = Instance.new("Frame", sg)
topBar.Size = UDim2.new(0, 300, 0, 40)
topBar.Position = UDim2.new(0.5, -150, 0, 5)
topBar.BackgroundColor3 = Color3.new(0,0,0)
topBar.Visible = false
Instance.new("UICorner", topBar)

local topLabel = Instance.new("TextLabel", topBar)
topLabel.Size = UDim2.new(1,0,1,0)
topLabel.Text = "NX2 - اضغط للفتح"
topLabel.TextColor3 = Color3.new(1,1,0)
topLabel.BackgroundTransparency = 1

local topOpen = Instance.new("TextButton", topBar)
topOpen.Size = UDim2.new(1,0,1,0)
topOpen.BackgroundTransparency = 1
topOpen.Text = ""

-- [ 4. زر النار FIRE NX2 - دائرة سوداء قابلة للتحريك ] --
local fire = Instance.new("TextButton", sg)
fire.Size = UDim2.new(0, 90, 0, 90)
fire.Position = UDim2.new(0.8, 0, 0.6, 0)
fire.BackgroundColor3 = Color3.new(0,0,0)
fire.Text = "FIRE\nNX2"
fire.TextColor3 = Color3.new(1,1,1)
fire.Font = Enum.Font.SourceSansBold
fire.Visible = false
fire.Draggable = true
Instance.new("UICorner", fire).CornerRadius = UDim.new(1, 0)
Instance.new("UIStroke", fire).Color = Color3.new(1,0,0)

-- [ تبويبات القائمة ] --
local p1 = Instance.new("Frame", main); p1.Size = UDim2.new(1,0,1,-80); p1.Position = UDim2.new(0,0,0,80); p1.BackgroundTransparency = 1
local p2 = Instance.new("Frame", main); p2.Size = p1.Size; p2.Position = p1.Position; p2.BackgroundTransparency = 1; p2.Visible = false

local function tab(t, x)
    local b = Instance.new("TextButton", main)
    b.Size = UDim2.new(0.5,0,0,40); b.Position = UDim2.new(x,0,0,40); b.Text = t
    b.BackgroundColor3 = Color3.fromRGB(30,30,30); b.TextColor3 = Color3.new(1,1,1)
    return b
end
local b1 = tab("اللعب", 0); local b2 = tab("الشخصية", 0.5)
b1.MouseButton1Click:Connect(function() p1.Visible = true; p2.Visible = false end)
b2.MouseButton1Click:Connect(function() p1.Visible = false; p2.Visible = true end)

local function btn(t, y, p)
    local b = Instance.new("TextButton", p)
    b.Size = UDim2.new(0.9,0,0,35); b.Position = UDim2.new(0.05,0,y,0)
    b.BackgroundColor3 = Color3.fromRGB(40,40,40); b.Text = t; b.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", b)
    return b
end

local aim = btn("Aimbot: OFF", 0.05, p1)
local speed = btn("Speed 4 (Safe): OFF", 0.05, p2)
local jump = btn("Jump 3.5: OFF", 0.2, p2)
local noclip = btn("Noclip (الاختراق): OFF", 0.35, p2)
local hide = btn("إخفاء القائمة", 0.55, p2)
local disc = btn("نسخ الديسكورد", 0.75, p2)

-- [ تشغيل START والتحميل ] --
sBtn.MouseButton1Click:Connect(function()
    sBtn.Text = "START..."
    task.wait(2)
    startFrame.Visible = false
    main.Visible = true
end)

hide.MouseButton1Click:Connect(function() main.Visible = false; topBar.Visible = true end)
topOpen.MouseButton1Click:Connect(function() topBar.Visible = false; main.Visible = true end)

-- [ تفعيل الأيم بوت ] --
aim.MouseButton1Click:Connect(function()
    fire.Visible = not fire.Visible
    aim.Text = fire.Visible and "Aimbot: ON" or "Aimbot: OFF"
end)

-- [ برمجة السرعة والنطة والاختراق - نسخة ماب كراشوت ] --
local sOn, jOn, nOn = false, false, false
speed.MouseButton1Click:Connect(function() sOn = not sOn; speed.Text = sOn and "Speed: ON" or "Speed: OFF" end)
jump.MouseButton1Click:Connect(function() jOn = not jOn; jump.Text = jOn and "Jump: ON" or "Jump: OFF" end)
noclip.MouseButton1Click:Connect(function() nOn = not nOn; noclip.Text = nOn and "Noclip: ON" or "Noclip: OFF" end)

rs.Heartbeat:Connect(function()
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local hrp = player.Character.HumanoidRootPart
        local hum = player.Character.Humanoid
        
        -- سرعة آمنة (دفع فيزيائي لمنع باند كراشوت)
        if sOn and hum.MoveDirection.Magnitude > 0 then
            hrp.Velocity = Vector3.new(hum.MoveDirection.X * 45, hrp.Velocity.Y, hum.MoveDirection.Z * 45)
        end
        
        if jOn then hum.JumpPower = 100 end
        
        if nOn then
            for _, v in pairs(player.Character:GetDescendants()) do
                if v:IsA("BasePart") then v.CanCollide = false end
            end
        end
    end
end)

disc.MouseButton1Click:Connect(function() setclipboard("https://discord.gg/syPpUv8Jf") end)