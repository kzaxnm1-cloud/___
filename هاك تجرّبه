local player = game:GetService("Players").LocalPlayer
local cg = game:GetService("CoreGui")
local rs = game:GetService("RunService")
local camera = workspace.CurrentCamera
local mouse = player:GetMouse()

-- المواقع المحددة للفتحات
local safePoints = {
    Vector3.new(100, 5, 100), -- الفتحة الأولى
    Vector3.new(200, 5, 200), -- الفتحة الثانية
    Vector3.new(300, 5, 300)  -- الفتحة الثالثة
}
local currentIndex = 0 -- الموضع الحالي

-- [ 1. تشغيل السكربت بدون تحقق ] --
if cg:FindFirstChild("NX2_CLEAN") then cg.NX2_CLEAN:Destroy() end
local sg = Instance.new("ScreenGui", cg)
sg.Name = "NX2_CLEAN"
sg.ResetOnSpawn = false

-- المنيو الرئيسي NX2
local main = Instance.new("Frame", sg)
main.Size = UDim2.new(0, 280, 0, 500)
main.Position = UDim2.new(0.5, -140, 0.5, -250)
main.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
main.Visible = true
main.Draggable = true
Instance.new("UICorner", main)
Instance.new("UIStroke", main).Color = Color3.new(1, 1, 0)

local logo = Instance.new("TextLabel", main)
logo.Size = UDim2.new(1, 0, 0.15, 0)
logo.Text = "NX2 v1 - CRASHOUT"
logo.TextColor3 = Color3.new(1, 1, 0)
logo.TextSize = 22
logo.BackgroundTransparency = 1

local showBtn = Instance.new("TextButton", sg)
showBtn.Size = UDim2.new(0, 80, 0, 30)
showBtn.Position = UDim2.new(0.5, -40, 0, 5)
showBtn.Text = "Show NX2"
showBtn.Visible = false
Instance.new("UICorner", showBtn)

local function makeBtn(t, y)
    local b = Instance.new("TextButton", main)
    b.Size = UDim2.new(0.9, 0, 0, 40)
    b.Position = UDim2.new(0.05, 0, 0, y)
    b.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    b.TextColor3 = Color3.new(1, 1, 1)
    b.TextSize = 16
    b.Text = t
    Instance.new("UICorner", b)
    return b
end

local aimB = makeBtn("Aimbot: OFF", 70)
local espB = makeBtn("ESP: OFF", 120)
local speedB = makeBtn("Speed: OFF", 170)
local jumpB = makeBtn("NX2 Jump: OFF", 220)
local noclipB = makeBtn("Noclip: OFF", 270)
local forwardB = makeBtn("أمام: الذهاب للفتحة التالية", 320) -- زر "أمام"
local backB = makeBtn("خلف: العودة للفتحة السابقة", 370) -- زر "خلف"
local hideB = makeBtn("Hide Menu", 440)
hideB.BackgroundColor3 = Color3.fromRGB(100, 0, 0)

-- [ 2. البرمجة ] --
local aimOn, espOn, sOn, jOn, nOn = false, false, false, false, false

speedB.MouseButton1Click:Connect(function()
    sOn = not sOn
    speedB.Text = sOn and "Speed: ON" or "Speed: OFF"
end)

jumpB.MouseButton1Click:Connect(function()
    jOn = not jOn
    jumpB.Text = jOn and "NX2 Jump: ON" or "NX2 Jump: OFF"
end)

aimB.MouseButton1Click:Connect(function()
    aimOn = not aimOn
    aimB.Text = aimOn and "Aimbot: ON" or "Aimbot: OFF"
end)

-- ESP تفعيل الـ
espB.MouseButton1Click:Connect(function()
    espOn = not espOn
    espB.Text = espOn and "ESP: ON" or "ESP: OFF"
    for _, p in pairs(game.Players:GetPlayers()) do
        if p ~= player and p.Character then
            if espOn then
                local h = Instance.new("Highlight", p.Character)
                h.Name = "NX2_ESP"
                h.FillColor = Color3.new(1, 0, 0)
            else
                if p.Character:FindFirstChild("NX2_ESP") then
                    p.Character.NX2_ESP:Destroy()
                end
            end
        end
    end
end)

-- التحكم في التنقل بين الفتحات
local function moveToPosition(index)
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        local humanoid = player.Character.Humanoid
        if index > 0 and index <= #safePoints then
            humanoid:MoveTo(safePoints[index])
        end
    end
end

forwardB.MouseButton1Click:Connect(function()
    if currentIndex < #safePoints then
        currentIndex = currentIndex + 1
        moveToPosition(currentIndex)
    end
end)

backB.MouseButton1Click:Connect(function()
    if currentIndex > 1 then
        currentIndex = currentIndex - 1
        moveToPosition(currentIndex)
    end
end)

-- التحكم في إظهار/إخفاء القائمة
hideB.MouseButton1Click:Connect(function()
    main.Visible = false
    showBtn.Visible = true
end)

showBtn.MouseButton1Click:Connect(function()
    main.Visible = true
    showBtn.Visible = false
end)